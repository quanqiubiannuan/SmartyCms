{extends file='layout.html'}
{block name=content}
<div class="row">
    <div class="col-md-6">
        <div class="card">
            <div class="card-body">
                <form method="post" action="{href}?id={$data['id']}" enctype="multipart/form-data">
                    <div class="mb-3">
                        <label for="auth_group_id" class="form-label">角色组</label>
                        <select class="custom-select" id="auth_group_id" name="auth_group_id">
                            <option value="0">请选择</option>
                            {foreach $authGroups as $authGroup}
                            <option value="{$authGroup['id']}" {if $data['auth_group_id'] == $authGroup['id']}selected="selected"{/if}>{echoLevelStr($authGroup['level'])}{$authGroup['name']}</option>
                            {/foreach}
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="name" class="form-label">用户名</label>
                        <input type="text" class="form-control" id="name" name="name" value="{$data['name']}" required="required">
                    </div>
                    <div class="mb-3">
                        <label for="avatar" class="form-label">头像</label>
                        <div class="custom-file">
                            <input class="custom-file-input" name="avatar" type="file" id="avatar" accept="image/*">
                            <label class="custom-file-label" for="avatar" id="avatarText">选择头像</label>
                        </div>
                        <small class="form-text text-success">如需更换头像，请选择图片文件。</small>
                    </div>
                    <div class="mb-3">
                        <label class="form-label d-block">性别</label>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="gender" id="gender1" value="1" {if $data['gender'] == 1}checked{/if}>
                            <label class="form-check-label" for="gender1">男</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="gender" id="gender2" value="2" {if $data['gender'] == 2}checked{/if}>
                            <label class="form-check-label" for="gender2">女</label>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="password" class="form-label">密码</label>
                        <input type="password" class="form-control" id="password" name="password" placeholder="新密码由6-20位字母或数字组成">
                        <small class="form-text text-success">如需更改密码，请输入新密码。</small>
                    </div>
                    <div class="mb-3">
                        <label class="form-label d-block">状态</label>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="status" id="status1" value="1" {if $data['status'] == 1}checked{/if}>
                            <label class="form-check-label" for="status1">正常</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="status" id="status2" value="2" {if $data['status'] == 2}checked{/if}>
                            <label class="form-check-label" for="status2">停用</label>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">编辑</button>
                </form>
            </div>
        </div>
    </div>
</div>
{/block}

{block name=js}
<script>
    $(document).ready(function (){
        $('#avatar').change(function (){
            let filePath = $(this).val();
            if (filePath !== ''){
                $('#avatarText').text(filePath);
            } else {
                $('#avatarText').text('选择头像');
            }
        });
    });
</script>
{/block}